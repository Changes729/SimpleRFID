(()=>{var x=Object.defineProperty;var I=(a,n,e)=>n in a?x(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e;var s=(a,n,e)=>(I(a,typeof n!="symbol"?n+"":n,e),e);var r=class{constructor(n){s(this,"_parent");this._parent=n}_onUpdate(){this.parent==null?this.render():this.parent._onUpdate}get parent(){return this._parent}set parent(n){this._parent=n}};var g=class extends r{constructor(e){super(e);s(this,"ip");s(this,"port");s(this,"touch_threadsholds");s(this,"release_threadsholds");this.ip=document.createElement("input"),this.port=document.createElement("input"),this.touch_threadsholds=document.createElement("input"),this.release_threadsholds=document.createElement("input"),this.ip.pattern="^([0-9]{1,3}.){3}[0-9]{1,3}$",this.port.pattern="^([0-9]).$"}update(e){this.ip.value=e.ip,this.port.value=e.port,this.touch_threadsholds.value=e.touch,this.release_threadsholds.value=e.release}value(){return{ip:this.ip.value,port:this.port.value,touch:this.touch_threadsholds.value,release:this.release_threadsholds.value}}render(){let e=document.createDocumentFragment(),t=document.createElement("div");var i=document.createElement("label"),l=document.createElement("label");i.innerText="Box IP:",l.innerText="port:";var E=[i,this.ip,l,this.port];for(var o of E)t.appendChild(o);let p=document.createElement("div");var u=document.createElement("label"),m=document.createElement("label");u.innerText="Touch:",m.innerText="Release:";var E=[u,this.touch_threadsholds,m,this.release_threadsholds];for(var o of E)p.appendChild(o);return e.appendChild(t),e.appendChild(p),e}};var v=class extends r{constructor(e){super(e);s(this,"enable");s(this,"ip");s(this,"port");this.enable=document.createElement("input"),this.ip=document.createElement("input"),this.port=document.createElement("input"),this.enable.type="checkbox",this.ip.pattern="^([0-9]{1,3}.){3}[0-9]{1,3}$",this.port.pattern="^([0-9]).$"}update(e){this.enable.checked=e.enable,this.ip.value=e.ip,this.port.value=e.port}value(){return{enable:this.enable.checked,ip:this.ip.value,port:this.port.value}}render(){let e=document.createElement("div");var t=document.createElement("label"),i=document.createElement("label"),l=document.createElement("label");t.innerText="Enable:",i.innerText="Box IP:",l.innerText="port:";var o=[t,this.enable,i,this.ip,l,this.port];for(var p of o)e.appendChild(p);return e}};var h=class extends r{constructor(e,t,i){super(i);s(this,"ip");s(this,"gateway");s(this,"mask");s(this,"title");this.title=e,this.ip=document.createElement("input"),this.gateway=document.createElement("input"),this.mask=document.createElement("input"),this.ip.pattern="^([0-9]{1,3}.){3}[0-9]{1,3}$",this.gateway.pattern="^([0-9]{1,3}.){3}[0-9]{1,3}$",this.mask.pattern="^([0-9]{1,3}.){3}[0-9]{1,3}$",this.ip.value=t.static_ip,this.gateway.value=t.gateway,this.mask.value=t.mask}update(e){this.ip.value=e.static_ip,this.gateway.value=e.gateway,this.mask.value=e.mask}value(){return{static_ip:this.ip.value,gateway:this.gateway.value,mask:this.mask.value}}render(){let e=document.createDocumentFragment(),t=document.createElement("label"),i=document.createElement("div"),l=document.createElement("label"),o=document.createElement("label"),p=document.createElement("label");t.innerText=this.title,l.innerText="Static IP:",o.innerText="Gateway:",p.innerText="Mask:",e.append(t);var u=[l,this.ip,o,this.gateway,p,this.mask];for(var m of u)i.appendChild(m);return e.append(i),e}};var f=class extends r{constructor(e,t){super(t);s(this,"ssid");s(this,"passwd");this.ssid=document.createElement("input"),this.passwd=document.createElement("input"),this.ssid.value=e.ssid,this.ssid.placeholder="SSID",this.passwd.value=e.passwd,this.passwd.placeholder="PASSWORD"}update(e){this.ssid.value=e.ssid,this.passwd.value=e.passwd}value(){return{ssid:this.ssid.value,passwd:this.passwd.value}}render(){let e=document.createElement("div"),t=document.createElement("label"),i=document.createElement("label");return t.innerText="SSID",i.innerText="Passwd",e.appendChild(t),e.appendChild(this.ssid),e.appendChild(i),e.appendChild(this.passwd),e}};var c=class extends r{constructor(e,t){super(t);s(this,"legend");this.legend=e}async save(){}render(){let e=document.createElement("fieldset");return e.innerHTML="<legend>".concat(this.legend,"</legend>"),e}},T=class extends c{constructor(e,t,i){super(e,i);s(this,"settings",[]);for(var l of t)this.settings.push(new f(l,this));this.reload()}async reload(){console.log("async reload wifi-settings"),fetch("/api/wpa_supplicant/info").then(e=>e.json()).then(e=>{console.log(e),e.metas.length>0&&e.metas.map((t,i)=>{i<e.max_info&&this.settings[i].update(t)})}).catch(e=>{console.log("exception: ",e)})}async save(){console.log("async save wifi-settings");var e=[];for(var t of this.settings)e.push(t.value());var i=new XMLHttpRequest;i.open("POST","/api/wpa_supplicant/info",!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify({metas:e}))}render(){let e=super.render();for(let t of this.settings)e.appendChild(t.render());return e}},w=class extends c{constructor(e,t){super(e,t);s(this,"settings",[]);this.settings.push(new h("eth",{static_ip:"",gateway:"",mask:""},this),new h("wlan",{static_ip:"",gateway:"",mask:""},this)),this.reload()}async reload(){fetch("/api/dhcpcd/eth").then(e=>e.json()).then(e=>{console.log(e),this.settings[0].update(e)}).catch(e=>{console.log("exception: ",e)}),fetch("/api/dhcpcd/wlan").then(e=>e.json()).then(e=>{console.log(e),this.settings[1].update(e)}).catch(e=>{console.log("exception: ",e)})}async save(){console.log("async save ip-settings");var e=new XMLHttpRequest;e.open("POST","/api/dhcpcd/eth",!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(this.settings[0].value())),e=new XMLHttpRequest,e.open("POST","/api/dhcpcd/wlan",!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(this.settings[1].value()))}render(){let e=super.render();var t=document.createElement("div");t.style.display="grid",t.style["grid-template-columns"]="auto 1fr",t.style["column-gap"]="10px",t.id="ip-settings";for(var i of this.settings)t.appendChild(i.render());return e.appendChild(t),e}},_=class extends c{constructor(e,t){super(e,t);s(this,"client");this.client=new g(this),this.reload()}async reload(){fetch("/api/box/info").then(e=>e.json()).then(e=>{console.log(e),this.client.update(e)}).catch(e=>{console.log("exception: ",e)})}async save(){console.log("async save app-settings");var e=new XMLHttpRequest;e.open("POST","/api/box/info",!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(this.client.value()))}render(){let e=super.render();return e.appendChild(this.client.render()),e}},y=class extends c{constructor(e,t){super(e,t);s(this,"setting");this.setting=new v(this),this.reload()}async reload(){fetch("/api/app/info").then(e=>e.json()).then(e=>{console.log(e),this.setting.update(e)}).catch(e=>{console.log("exception: ",e)})}async save(){console.log("async save app-settings");var e=new XMLHttpRequest;e.open("POST","/api/app/info",!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(this.setting.value()))}render(){let e=super.render();return e.appendChild(this.setting.render()),e}},d={WIFI_SETTING:0,IP_SETTING:1,APP_SETTING:2,DEBUG_SETTING:3},b=class extends r{constructor(e){super(e);s(this,"fieldsets",{});s(this,"button");this.fieldsets[d.WIFI_SETTING]=new T("WiFi Settings",[{ssid:"",passwd:""},{ssid:"",passwd:""},{ssid:"",passwd:""}],this),this.fieldsets[d.IP_SETTING]=new w("IP Settings",this),this.fieldsets[d.APP_SETTING]=new _("APP Settings",this),this.fieldsets[d.DEBUG_SETTING]=new y("Debug Settings",this),this.button=document.createElement("button"),this.button.className="primary",this.button.id="savebtn",this.button.type="button",this.button.innerText="SAVE",this.button.onclick=()=>{this.on_save()}}render(){let e=document.createElement("form");console.log(this.fieldsets);for(var t in d)e.appendChild(this.fieldsets[d[t]].render());return e.appendChild(this.button),e}on_save(){console.log("button was clicked!");for(var e in d)this.fieldsets[d[e]].save()}};var S=new b;window.addEventListener("load",a=>{console.log("on windows load.");let n=document.getElementById("app");n==null||n.append(S.render())});})();
//# sourceMappingURL=network.js.map
